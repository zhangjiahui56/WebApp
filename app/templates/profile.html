{% extends "base.html" %}
{% block content %}
{% with title="Profile" %}
{% include 'includes/_mini_slide.html' %}
{% endwith %}

<div class="container">
    <div class="p-5">
    {% include "/includes/_messages.html" %}
    <h1 align="center">Profile</h1>
  	<hr>
        {% from "/includes/_formhelpers.html" import render_field %}
        <form class="form-horizontal" role="form" action="" method="post">
            {{ form.hidden_tag() }}
          <div class="form-group">
            <label class="col-md-4 control-label">Username:</label>
            <div class="col-md-6">
                <input type="text" class="form-control" value={{user.username}} style="font-size: 1.5rem;" disabled>
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-4 control-label">Name:</label>
            <div class="col-md-6">
                {{render_field(form.name, type="text", id="name", class="form-control", style="font-size: 1.5rem;", value=user.name, disabled="disabled")}}
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-4 control-label">Address:</label>
            <div class="col-md-6">
                {{render_field(form.address, type="text", id="address", class="form-control", style="font-size: 1.5rem;", value=user.address, disabled="disabled")}}
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-4 control-label">Phone Number:</label>
            <div class="col-md-6">
                {{render_field(form.phone_number, type="tel", id="phone_number", class="form-control", style="font-size: 1.5rem;",
                value=user.phone_number, pattern= '^\s*(?:\+?(\d{1,3}))?[-. (]*(\d{3})[-. )]*(\d{3})[-. ]*(\d{4})(?: *x(\d+))?\s*$', disabled="disabled")}}
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-4 control-label"></label>
            <div class="col-md-6" id="submit-div">
                <input type="reset" id="edit" class="btn btn-primary" value="Edit Profile" style="font-size: 1.5rem;">


            </div>
          </div>
        </form>
    </div>
</div>

<hr>

<script>
    $("#edit").click(function(e){
        var name = $("#name").val();
        var address = $("#address").val();
        var phone_number = $("#phone_number").val();
        $("#name").removeAttr("disabled");
        $("#address").removeAttr("disabled");
        $("#phone_number").removeAttr("disabled");
        $("#submit-div").append('<button type="submit" id="edit-submit" class="btn btn-primary" value="Save Changes" style="font-size: 1.5rem;">Save Changes</button>');
        $("#submit-div").append('<span id="edit-span"> </span>');
        $("#submit-div").append('<input type="reset" id="edit-cancel" class="btn btn-secondary" value="Cancel" style="font-size: 1.5rem;">');
        $("#submit-div").find('#edit').hide();
        $("#edit-cancel").click(function() {
            $("#name").val(name);
            $("#address").val(address);
            $("#phone_number").val(phone_number);
            $("#name").attr('disabled', true);
            $("#address").attr('disabled', true);
            $("#phone_number").attr('disabled', true);
            $("#submit-div").find('#edit-submit').remove();
            $("#submit-div").find('#edit-span').remove();
            $("#submit-div").find('#edit-cancel').remove();
            $("#submit-div").find('#edit').show();
        });
    });


</script>

{% endblock %}